<!DOCTYPE html>
<html ng-app="msrsApp">
<head>

<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular.js"></script>
<script src="js/app.js"></script>
<script src="js/home.controller.js"></script>
<script src="js/empView.Controller.js"></script>
<script src="js/emp.service.js"></script>
<script src="js/common.service.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>        
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp"
        crossorigin="anonymous">

</head>

<body>

<div class="container">
    
	<div ng-controller="msrsHomeController as c">
		
		<div ng-show="c.currentView == 'home'">
			<div class="row">
			<table class="table ">
				<tr class="col-sm-8"><td><h4>Search Employee</h4></td></tr>
				<tr class="col-sm-8"><td>Emp Id</td>	<td><input type="text" ng-model="c.search.empid" /></td>  <td>DOB</td>	<td><input type="text" ng-model="search.dob" /></td></tr>
				<tr class="col-sm-8"><td>First Name</td>	<td><input type="text" ng-model="c.search.firstname" /></td> <td>Phone</td>	<td><input type="text" ng-model="search.phone" /></td></tr>
				<tr class="col-sm-8"><td>Last Name</td>	<td><input type="text" ng-model="c.search.lastname" /></td><td>E mail</td>	<td><input type="text" ng-model="search.email" /></td></tr>								
				<tr class="col-sm-8"> <td><button ng-click="c.myFunction()">Search</button></td></tr>
			</table>
            </div>
			<table class="table table-striped">
				<thead>
					<tr>
						
						<th><a href="" ng-click="c.order('empid')">Emp ID </a></th>
						<th><a href="" ng-click="c.order('firstname')"> First Name</a>
						</th>
						<th><a href="" ng-click="c.order('lastname')">Last Name</a></th>
						<th><a href="" ng-click="c.order('dob')">DOB</a></th>
						<th><a href="" ng-click="c.order('phone')">Phone</a></th>
						<th><a href="" ng-click="c.order('email')">Email</a></th>
					</tr>
					
				</thead>
				<tbody style="padding:0px;">

					<tr	ng-repeat="emp in c.emps">
						
						<td style="padding:0px;">{{ emp.empid}}</td>
						<td style="padding:0px;">{{ emp.firstname}}</td>
						<td style="padding:0px;">{{ emp.lastname}}</td>
						<td style="padding:0px;">{{ emp.dob}}</td>
						<td style="padding:0px;">{{ emp.phone}}</td>
						<td style="padding:0px;">{{ emp.email}}</td>
						<td style="padding:0px;">
							<button class="btn btn-default" ng-click="c.findById(emp.empid)">View</button>
						</td>
					</tr>
				</tbody>
			</table>

		</div> <!-- end of home component -->
	</div>	 <!-- end of msrsHomeController -->

	<div ng-controller="empDetailsController as empDetails">
		<div ng-show="empDetails.currentView == 'empView'">

  <div class="row">
      <button type="button" class="btn btn-default" ng-click="empDetails.goBack('home')">Back</button>     
  </div>

	<form class="form-horizontal"> <!-- start employee details -->

    <div class="form-group">
      <label class="control-label col-sm-2" for="fName">First Name:</label>
      <div class="col-sm-4">
        <input type="text" class="form-control" id="fName" ng-model="empDetails.currentEmp.firstname">
      </div>
  
      <label class="control-label col-sm-2" for="lName">Last Name:</label>
      <div class="col-sm-4">
        <input type="text" class="form-control" id="lName" ng-model="empDetails.currentEmp.lastname">
      </div>
    </div>

	<div class="form-group">
      <label class="control-label col-sm-2" for="aadhar">Aadhar Number:</label>
      <div class="col-sm-4">
        <input type="text" class="form-control" id="aadhar" ng-model="empDetails.currentEmp.aatharnumber">
      </div>
    
      <label class="control-label col-sm-2" for="email">Email:</label>
      <div class="col-sm-4">
        <input type="email" class="form-control" id="aadhar" ng-model="empDetails.currentEmp.email" >
      </div>
    </div>
	<div class="form-group">
      <label class="control-label col-sm-2" for="panCard">Pan card:</label>
      <div class="col-sm-4">
        <input type="text" class="form-control" id="panCard" ng-model="empDetails.currentEmp.pancard">
      </div>
    
      <label class="control-label col-sm-2" for="phNo">Phone no:</label>
      <div class="col-sm-4">
        <input type="tel" class="form-control" id="phNo" ng-model="empDetails.currentEmp.phone">
      </div>
    </div>

	<div class="form-group">
      <label class="control-label col-sm-2" for="address1">Address1:</label>
      <div class="col-sm-4">
        <input type="textarea" class="form-control" id="address1" ng-model="empDetails.currentEmp.adress1">
      </div>
    
      <label class="control-label col-sm-2" for="address2">Address2:</label>
      <div class="col-sm-4">
        <input type="textarea" class="form-control" id="address2" ng-model="empDetails.currentEmp.adress2">
      </div>
    </div>

	<div class="form-group">
      <label class="control-label col-sm-2" for="dob">Dob:</label>
      <div class="col-sm-4">
        <input type="date" class="form-control" id="dob" ng-model="empDetails.currentEmp.dob" >
      </div>
   
      <label class="control-label col-sm-2" for="doj">Doj:</label>
      <div class="col-sm-4">
        <input type="date" class="form-control" id="doj" ng-model="empDetails.currentEmp.doj">
      </div>
    </div>

	<div class="form-group">
      <label class="control-label col-sm-2" for="Dor">Dor:</label>
      <div class="col-sm-4">
        <input type="date" class="form-control" id="Dor" ng-model="empDetails.currentEmp.dor">
      </div>
   
      <label class="control-label col-sm-2" for="district">District:</label>
      <div class="col-sm-4">
        <input type="text" class="form-control" id="district" ng-model="empDetails.currentEmp.district">
      </div>
    </div>

    <div class="form-group">
      <label class="control-label col-sm-2" for="state">State:</label>
      <div class="col-sm-4">          
        <input type="text" class="form-control" id="state" ng-model="empDetails.currentEmp.state">
      </div>
    
      <label class="control-label col-sm-2" for="pincode">Pincode:</label>
      <div class="col-sm-4">          
        <input type="pincode" class="form-control" id="pincode" ng-model="empDetails.currentEmp.pincode">
      </div>
    </div>

    <div class="row">&nbsp;</div>
    
    <div class=" row clearfix" ng-if="empDetails.showAddIncidentForm">

      <div class="panel panel-info" >
      <div class="panel-heading">Add Incedent</div>
      <div class="panel-body">
        <form class="form-horizontal">    <!-- Start of create new incedent -->
          <div class="form-group">
              <label class="control-label col-sm-2" >Details:</label>
              <div class="col-sm-2">          
                <input type="text" class="form-control" id="incidentDetails" ng-model="newIncDetails">
              </div>

              <label class="control-label col-sm-2" >First day of incident:</label>
              <div class="col-sm-2">          
                <input type="Date" class="form-control" id="state" ng-model="newIncFirstDay">
              </div>
          </div>

          <div class="form-group">

              <div class="col-sm-offset-2 col-sm-2">
                <div class="checkbox">
                  <label class="control-label"><input type="checkbox" />Is home visit required:</label>
                </div>
              </div>


              <label class="control-label col-sm-2" >Benefit Type:</label>
              <div class="col-sm-2">          
                <input type="text" class="form-control" ng-model="newIncBenefiteType">
              </div>
          </div>

          <div class="form-group">
              <label class="control-label col-sm-2" >Office Location 1:</label>
              <div class="col-sm-2">          
                <input type="text" class="form-control" ng-model="newIncOfficeLoc1">
              </div>

              <label class="control-label col-sm-2" >Office Location 2:</label>
              <div class="col-sm-2">          
                <input type="text" class="form-control" ng-model="newIncOfficeLoc2">
              </div>
          </div>

          <div class="form-group">
              <span class="col-sm-1"></span>
              <button class="btn btn-primary col-sm-1" ng-click="empDetails.saveIncident(empDetails.currentEmp.empid)">Save</button>
              <span class="col-sm-1"></span>
              <button class="btn btn-primary col-sm-1" ng-click="empDetails.showIncidentForm(false)">Cancel</button>              
          </div>

        </form>  <!-- End of create new incedent -->
        </div>
        </div>
      </div>
   
    <div class="form-group col-sm-9">   <!-- Start of incident table div -->

      <!-- Building incidense grid -->
      <div class="row"><label class="control-label">Incidents : </label></div>
       <table class="table table-striped table-bordered table-condensed">
				<thead>
					<tr>
            <th>Serial No</th>
						<th>Details</th>
						<th>First day of incident</th>
						<th>Is home visitrequired</th>
						<th>Office 1</th>
						<th>Office 2</th>
            <th>Benefit Type </th>
            <th>    </th>
					</tr>					
				</thead>
				<tbody >
					<tr	ng-repeat="inc in empDetails.currentEmp.incidents">
            <td>{{ $index }}</td>
						<td>{{ inc.details}}</td>
						<td>{{ inc.firstdayofincident}}</td>
						<td>{{ inc.ishomevisitrequired}}</td>
						<td>{{ inc.officeLocation1.officelocation}}</td>
						<td>{{ inc.officeLocation2.officelocation}}</td>
            <td>todo</td>
						<td>
							<button class="btn btn-link" ng-click="empDetails.editIncidentOfEmp(inc.empid ,inc.incidentid)">Edit</button>
						</td>
					</tr>
				</tbody>
			</table>

    </div> <!-- End of incident table div -->
    <div class="col-sm-1">
      &nbsp;
    </div>
    <div class="col-sm-2">



      <!-- 

         {
      "incidentid": 1,
      "createdtime": 1486751400000,
      "details": "head ache",
      "empid": 1,
      "firstdayofincident": "2016-12-12",
      "ishomevisitrequired": 1,
      "modifiedtime": 1486751400000,
      "benefitType": {
        "benefittypeid": 1,
        "benefittype": "Fever",
        "createdtime": 1486303194000,
        "modifiedtime": 1486303194000
      },
      "officeLocation1": {
        "officelocationid": 1,
        "createdtime": 1486303133000,
        "modifiedtime": 1486303133000,
        "officelocation": "mehdipatnam"
      },
      "officeLocation2": {
        "officelocationid": 2,
        "createdtime": 1486303144000,
        "modifiedtime": 1486303144000,
        "officelocation": "hitechcity"
      }
    }



      -->
      <div ng-if="!empDetails.showAddIncidentForm" ng-click="empDetails.showIncidentForm(true)"> <button class="btn btn-primary">Add incident</button> </div>

    </div>
   </form> <!-- end employee details -->
		</div>
   
	</div> <!-- end of empDetailsController -->

</div>

</body>
</html>
